<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.al.nppm.business.account.dao.IPayToPlanMapper" >

    <select id="getAcctId" resultType="java.lang.Long" parameterType="map" >
    select  IFNULL(MIN (ACCT_ID) ,0)
    from PROD_INST_ACCT_REL
	where PROD_INST_ID = #{prodInstId}
        AND STATUS_CD = '1'
        and route_id=#{routeId}
  </select>

    <insert id="insertInterPayToPlan" parameterType="map">
        insert into INTER_PAY_TO_PLAN
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="interPlanId !=null">
                INTER_PLAN_ID,
            </if>
            <if test="depositType !=null">
                DEPOSIT_TYPE,
            </if>
            <if test="offerInstId !=null">
                OFFER_INST_ID,
            </if>
            <if test="offerId !=null">
                OFFER_ID,
            </if>
            <if test="acctId !=null">
                ACCT_ID,
            </if>
            <if test="objectType !=null">
                OBJECT_TYPE,
            </if>
            <if test="objectId !=null">
                OBJECT_ID,
            </if>
            <if test="amount !=null">
                AMOUNT,
            </if>
            <if test="operType !=null">
                OPER_TYPE,
            </if>
            <if test="operState !=null">
                OPER_STATE,
            </if>
            <if test="effDate !=null">
                EFF_DATE,
            </if>
            <if test="orderDate !=null">
                ORDER_DATE,
            </if>
            <if test="true">
                CREATE_DATE,
                OPER_DATE
            </if>
        </trim>
        <trim prefix=" values (" suffix=")" suffixOverrides=",">
            <if test="interPlanId !=null">
                #{interPlanId},
            </if>
            <if test="depositType !=null">
                #{depositType},
            </if>
            <if test="offerInstId !=null">
                #{offerInstId},
            </if>
            <if test="offerId !=null">
                #{offerId},
            </if>
            <if test="acctId !=null">
                #{acctId},
            </if>
            <if test="objectType !=null">
                #{objectType},
            </if>
            <if test="objectId !=null">
                #{objectId},
            </if>
            <if test="amount !=null">
                #{amount},
            </if>
            <if test="operType !=null">
                #{operType},
            </if>
            <if test="operState !=null">
                #{operState},
            </if>
            <if test="effDate !=null">
                #{effDate},
            </if>
            <if test="orderDate !=null">
                #{orderDate},
            </if>
            <if test="true">
                sysdate(),
                sysdate()
            </if>
        </trim>
    </insert>

    <insert id="insertTifFeeBill" parameterType="map">
        insert into TIF_FEE_BILL
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="areaCode !=null">
                AREA_CODE,
            </if>
            <if test="serialnumber !=null">
                SERIALNUMBER,
            </if>
            <if test="feeSerial !=null">
                FEE_SERIAL,
            </if>
            <if test="orderNo !=null">
                ORDER_NO,
            </if>
            <if test="userId !=null">
                USER_ID,
            </if>
            <if test="acctItemType !=null">
                ACCT_ITEM_TYPE,
            </if>
            <if test="payCharge !=null">
                PAY_CHARGE,
            </if>
            <if test="payTimes !=null">
                PAY_TIMES,
            </if>
            <if test="feeDate !=null">
                FEE_DATE,
            </if>
            <if test="effDate !=null">
                EFF_DATE,
            </if>
            <if test="state !=null">
                STATE,
            </if>
            <if test="notes !=null">
                NOTES,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="areaCode !=null">
                #{areaCode},
            </if>
            <if test="serialnumber !=null">
                #{serialnumber},
            </if>
            <if test="feeSerial !=null">
                #{feeSerial},
            </if>
            <if test="orderNo !=null">
                #{orderNo},
            </if>
            <if test="userId !=null">
                #{userId},
            </if>
            <if test="acctItemType !=null">
                #{acctItemType},
            </if>
            <if test="payCharge !=null">
                #{payCharge},
            </if>
            <if test="payTimes !=null">
                #{payTimes},
            </if>
            <if test="feeDate !=null">
                #{feeDate},
            </if>
            <if test="effDate !=null">
                #{effDate},
            </if>
            <if test="state !=null">
                #{state},
            </if>
            <if test="notes !=null">
                #{notes},
            </if>
        </trim>
    </insert>

</mapper>
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.al.nppm.business.acctrh.dao.SmsInfoMapper" >

    <insert id="insert" parameterType="com.al.nppm.model.SmsInfo">
    insert into SMS_INFO (ID, MSISDN, FLAG,
      MSG, STS, GET_DATE, PARA1,
      PARA2, PARA3, SEND_DATE,
      MSG_ID, PRI, ACC_ID,
      RECV, SAVE_HIS_DATE)
    values (#{id,jdbcType=DECIMAL}, #{msisdn,jdbcType=VARCHAR}, #{flag,jdbcType=VARCHAR},
      #{msg,jdbcType=VARCHAR}, #{sts,jdbcType=CHAR}, #{getDate,jdbcType=TIMESTAMP}, #{para1,jdbcType=VARCHAR},
      #{para2,jdbcType=VARCHAR}, #{para3,jdbcType=VARCHAR}, #{sendDate,jdbcType=TIMESTAMP},
      #{msgId,jdbcType=VARCHAR}, #{pri,jdbcType=DECIMAL}, #{accId,jdbcType=DECIMAL},
      #{recv,jdbcType=VARCHAR}, #{saveHisDate,jdbcType=DATE})
  </insert>
    <select id="getSeq" resultType="java.lang.Long" parameterType="map">
	select ${seq_name}.nextval from dual
  </select>
    <select id="getCrmOfferInstInfo"  resultType="java.util.HashMap" >
  select a.offer_inst_id "offerInstId",
       a.offer_id      "offerId",
       a.owner_cust_id "ownerCustId",
       acct_id         "routeId",
       a.exp_date      "expDate",
       a.offer_type    "offerType",
       a.status_cd    "statusCd",
       a.region_Id    "regionId",
       a.create_org_id "createOrgId"
  from inst.offer_inst@db_crm_rh          a,
       inst.offer_prod_inst_rel@db_crm_rh b,
       inst.prod_inst_acct_rel@db_crm_rh  c
 where a.offer_inst_id = b.offer_inst_id
   and b.role_id = 90000
   and a.offer_inst_id = #{offerInstId}
   and b.prod_inst_id = c.prod_inst_id
    </select>
    <select id="getCrmProdInstInfo"  resultType="java.util.HashMap" >
  select prod_inst_id
  from inst.prod_inst@db_crm_rh
 where  prod_inst_id = #{prodInstId}
    </select>
</mapper>